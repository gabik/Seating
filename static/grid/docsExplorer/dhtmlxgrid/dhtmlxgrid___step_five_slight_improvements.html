<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../codebase/default.css" type="text/css" media="screen" title="no title" charset="utf-8"><title>
    dhtmlxgrid:step_five_slight_improvements    [DHX documentation]
  </title></head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
    <a class="logo" href="http://dhtmlx.com" title="DHTMLX Home Page"></a>
    <span class="tittle-dhtmlx">DHTMLX Docs & Samples Explorer</span>

    <div class="search-field">
        <form action="/dhtmlx/docs/doku.php" accept-charset="utf-8" id="dw__search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" title="Search" /><button type="submit"></button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>    </div>
        <div class="buttons">
                <a class="doc"></a>
                <a title="DHTMLX Samples homepage" href="../samples.html" class="sample"/></a>
        </div>
     <!-- <div class="pagename">
        [[<a href="#"  title="Backlinks">dhtmlxgrid:step_five_slight_improvements</a>]]
      </div>
      <div class="logo">
        <a href="/dhtmlx/docs/doku.php"  name="dokuwiki__top" id="dokuwiki__top" accesskey="h" title="[H]">DHX documentation</a>      </div>

      <div class="clearer"></div>-->
        
    </div>

    
<!--   <div class="bar" id="bar__top">
      <div class="bar-left" id="bar__topleft">
        <form class="button btn_edit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="dhtmlxgrid:step_five_slight_improvements" /><input type="submit" value="Edit this page" class="button" accesskey="e" title="Edit this page [E]" /></div></form>        <form class="button btn_revs" method="get" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="dhtmlxgrid:step_five_slight_improvements" /><input type="submit" value="Old revisions" class="button" accesskey="o" title="Old revisions [O]" /></div></form>      </div>

      <div class="bar-right" id="bar__topright">
        <form class="button btn_recent" method="get" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="dhtmlxgrid:step_five_slight_improvements" /><input type="submit" value="Recent changes" class="button" accesskey="r" title="Recent changes [R]" /></div></form>        <form action="/dhtmlx/docs/doku.php" accept-charset="utf-8" id="dw__search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" title="Search" /><button type="submit"></button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>&nbsp;
      </div>

      <div class="clearer"></div>
    </div> -->

<!--        <div class="breadcrumbs">
      <span class="bchead">Trace:</span> <span class="bcsep">&raquo;</span> <span class="curid"><a href="/dhtmlx/docs/doku.php?id=dhtmlxgrid:step_five_slight_improvements"  class="breadcrumbs" title="dhtmlxgrid:step_five_slight_improvements">step_five_slight_improvements</a></span>    </div>
    -->

    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    
<p>
<div class='backlinks'><div class='backlink last_backlink'><img src="icons___file.gif"  class="media" alt="" /><a href="../index.html" class="wikilink1" title="start">Index</a></div><div class='arrow'></div><div class='backlink last_backlink'><img src="icons___grid.gif"  class="media" alt="" /><a href="index.html" class="wikilink1" title="dhtmlxgrid:toc">dhtmlxgrid</a></div></div>

</p>

<h2><a name="step_five_-_slight_improvements" id="step_five_-_slight_improvements">Step Five - Slight Improvements</a></h2>
<div class="level2">

<p>
One thing left in order to finish up with the practice - to spruce up.
Let&#039;s start with adding a visual mark for edited lines. The field “Updated” has already been set in such a way that we need only to introduce slight changes into the data loading code to make changed data from the local data store look like newly edited one.
</p>

<p>
Code (javascript)
</p>
<ul>
<li class="level1"><div class="li">  style is used to mark already edited lines </div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript">data.<span class="me1">push</span><span class="br0">&#40;</span><span class="br0">&#123;</span></pre></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript"><span class="kw2">function</span> fill_grid<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
id<span class="sy0">:</span>rs.<span class="me1">field</span><span class="br0">&#40;</span>0<span class="br0">&#41;</span><span class="sy0">,</span></pre></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript"><span class="kw2">function</span> fill_grid<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
style<span class="sy0">:</span>rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">16</span><span class="br0">&#41;</span><span class="sy0">?</span>‘font<span class="sy0">-</span>weight<span class="sy0">:</span>bold;’<span class="sy0">:</span>”<span class="sy0">,</span></pre></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript"><span class="kw2">function</span> fill_grid<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
data<span class="sy0">:</span><span class="br0">&#91;</span>rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">4</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">5</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">6</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">7</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">8</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">9</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">11</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">12</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">13</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">14</span><span class="br0">&#41;</span><span class="sy0">,</span>
rs.<span class="me1">field</span><span class="br0">&#40;</span><span class="nu0">15</span><span class="br0">&#41;</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#41;</span></pre></div>
</li>
</ul>
<blockquote><div class="no">
This point turned out to be quite time consuming in spite of all its simplicity. As it turned out, the basic version of grid can&#039;t load styles from json data. This was healed with the help of a patch found at the support forum. But the whole affair left a bitter taste in my mouth.</div></blockquote>

<p>

When the grid is saved in the database, it would be a good thing to clear the data store.
Code (javascript)
</p>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript"><span class="kw2">function</span> save_data<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span></pre></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  if there is Google Gears</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript"><span class="kw1">if</span> <span class="br0">&#40;</span>db<span class="br0">&#41;</span></pre></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  clear the table we used - a disputable method, but in this case it&#039;s effective</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript">db.<span class="me1">execute</span><span class="br0">&#40;</span>‘drop table photodata’<span class="br0">&#41;</span></pre></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript">document.<span class="me1">forms</span><span class="br0">&#91;</span>0<span class="br0">&#93;</span>.<span class="me1">data</span>.<span class="me1">value</span><span class="sy0">=</span>grid.<span class="me1">serializeToCSV</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript">document.<span class="me1">forms</span><span class="br0">&#91;</span>0<span class="br0">&#93;</span>.<span class="me1">submit</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript"><span class="br0">&#125;</span></pre></div>
</li>
</ul>

<p>
You can see the result <a href="http://tech-notes.monoxrom.net/tests/gears/step4.html" class="urlextern" title="http://tech-notes.monoxrom.net/tests/gears/step4.html"  rel="nofollow">here</a>.
Edited lines still remain visually different when the page is reloaded, thus it&#039;s easy to notice the changes.
Full page reloading and data store clearing take place while the page is being saved. 
Everything works from the technical point of view. As the last step we can add some free useful things such as sorting and filtering. Both the possibilities are standard for grid and don&#039;t require any voodoo programming.
</p>

<p>
Code (javascript)

</p>
<ul>
<li class="level1"><div class="li">  <pre class="code javascript">grid.<span class="me1">setColSorting</span><span class="br0">&#40;</span><span class="st0">&quot;str,str,str,int,int,int,str,str,int,int,int,int,int,str,na&quot;</span><span class="br0">&#41;</span>;</pre></div>
</li>
<li class="level1"><div class="li">  <pre class="code javascript">grid.<span class="me1">attachHeader</span><span class="br0">&#40;</span><span class="st0">&quot;#rspan,#select_filter,#select_filter,#rspan,#rspan,#rspan,#rspan,#rspan,#rspan,#rspan,#rspan,#rspan,#rspan,#rspan,#rspan&quot;</span><span class="br0">&#41;</span>;</pre></div>
</li>
</ul>

<p>

The final result is available <a href="http://tech-notes.monoxrom.net/tests/gears/step5.html" class="urlextern" title="http://tech-notes.monoxrom.net/tests/gears/step5.html"  rel="nofollow">here</a>.
<a href="/dhtmlx/docs/lib/exe/detail.php?id=dhtmlxgrid%3Astep_five_slight_improvements&amp;media=dhtmlxgrid:extern_0002.png" class="media wikilink2" title="dhtmlxgrid:extern_0002.png"><img src="dhtmlxgrid___extern_0002.png"  class="media" alt="" /></a>
</p>

</div>
<div class="secedit"><form class="button btn_secedit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="lines" value="53-" /><input type="hidden" name="rev" value="1279031289" /><input type="hidden" name="id" value="dhtmlxgrid:step_five_slight_improvements" /><input type="submit" value="Edit" class="button" title="Step Five - Slight Improvements" /></div></form></div>
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
     <!-- <div class="doc">
        dhtmlxgrid/step_five_slight_improvements.txt &middot; Last modified: 2010/07/13 17:28 (external edit)      </div>
    </div>-->

   
    <!--<div class="bar" id="bar__bottom">-->
      <!--<div class="bar-left" id="bar__bottomleft">-->
        <!--<form class="button btn_edit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="dhtmlxgrid:step_five_slight_improvements" /><input type="submit" value="Edit this page" class="button" accesskey="e" title="Edit this page [E]" /></div></form>-->
        <!--<form class="button btn_revs" method="get" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="dhtmlxgrid:step_five_slight_improvements" /><input type="submit" value="Old revisions" class="button" accesskey="o" title="Old revisions [O]" /></div></form>-->
      <!--</div>-->
      <!--<div class="bar-right" id="bar__bottomright">-->
        <!---->
        <!---->
        <!---->
        <!---->
        <!---->
        <!--<form class="button btn_index" method="get" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="dhtmlxgrid:step_five_slight_improvements" /><input type="submit" value="Index" class="button" accesskey="x" title="Index [X]" /></div></form>-->
        <!--<a class="nolink" href="#dokuwiki__top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" title="Back to top" /></a>&nbsp;-->
      <!--</div>-->
      <!--<div class="clearer"></div>-->
    <!--</div>-->

  </div>

  

</div>

<div class="footerinc">


</div>

<div class="no"><img src="/dhtmlx/docs/lib/exe/indexer.php?id=dhtmlxgrid%3Astep_five_slight_improvements&amp;1310069467" width="1" height="1" alt=""  /></div>
     <div class="footer">
        <div class="footer-logo"></div>
        <div class="copyright">Copyright © 1998-2011 DHTMLX LTD.<br />All rights reserved.</div>
        <form class="button btn_edit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="dhtmlxgrid:step_five_slight_improvements" /><input type="submit" value="Edit this page" class="button" accesskey="e" title="Edit this page [E]" /></div></form>    	    </div>
</body>
</html>
